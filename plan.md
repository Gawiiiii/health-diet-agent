# 项目计划书

## 封面信息

- 项目名称：智能菜单识别与个性化饮食建议系统
- 版本：V1.0
- 团队代号：（填写）
- 提交日期：（填写）

## 1. 项目概述

### 1.1 背景

餐饮场景中菜单信息密集且表达不规范，过敏人群或有健康管理需求的用户难以在短时间内做出安全选择。基于移动端拍照与 OCR 的快速识别，再结合语义结构化与个性化规则，可以显著提升点餐决策效率与安全性。

### 1.2 目标

构建一套可在移动端快速运行的“菜单识别—结构化理解—风险提示—个性化建议”闭环系统，实现拍照识别与文本输入两种路径的智能分析，并保留历史结果以便追溯。

### 1.3 创新点

1. 多模态输入与语义理解闭环：通过 CameraX 与 ML Kit OCR 将图像文字转化为结构化菜单，再由后端语义分析形成可解释建议。
2. 个性化偏好引擎：引入过敏、忌口和健康目标规则，输出具有可操作性的风险提示与建议。
3. 轻量分层设计：本地 OCR 与云端解析解耦，即使在弱网环境也能完成基础识别与提示。

## 2. 技术方案

### 2.1 总体架构

（此处插入架构图）

```
Android 客户端（Kotlin + Jetpack Compose）
        ↓（HTTP/REST）
后端分析服务（FastAPI + SoruxGPT API）
        ↓
本地存储（Room + DataStore）
```

### 2.2 功能概述

| 功能模块 | 简要描述 |
| --- | --- |
| 拍照/上传菜单 | CameraX 拍照或相册选择 |
| OCR 文字识别 | 本地 ML Kit Text Recognition |
| 智能分析 | FastAPI 后端进行结构化解析与风险评估 |
| 个性化建议 | 过敏与偏好规则结合风险等级输出 |
| 历史记录 | Room 持久化保存分析结果 |

### 2.3 关键技术点

- Android 多模态输入：CameraX + ML Kit OCR + Compose UI
- 智能理解与建议生成：FastAPI + SoruxGPT + 规则引擎
- 个性化偏好：DataStore 存储用户偏好与健康目标

### 2.4 其他技术说明

- 本地缓存：Room 存储分析历史，DataStore 保存偏好配置
- 接口标准：REST 风格，结构化 JSON 作为交互契约
- 网络层：Retrofit + Moshi，保证结构化数据稳定解析

### 2.5 当前实现情况（基于现有代码）

- Android 端已完成：相机采集、OCR 识别、文本编辑、分析调用、结果展示、历史记录、偏好设置、演示一键填充。
- 后端已完成：`/analyze` 接口、结构化输出、规则命中、SoruxGPT 解析、异常处理与 CORS。
- 本地存储已完成：Room 历史记录与 DataStore 偏好数据持久化。

## 3. 项目计划

### 3.1 可行性分析

**技术可行性**
- CameraX、ML Kit、Jetpack Compose、FastAPI 均为成熟技术栈。
- OCR + 规则引擎已实现，SoruxGPT 提供结构化解析与增强能力。

**资源可行性**
- 设备与开发环境需求可控，依赖均为主流开源组件。
- 团队分工清晰，开发成本可控。

**风险与控制**
- OCR 噪声：通过文本编辑与规则兜底降低误判。
- 网络依赖：本地识别与后端解析分层，弱网仍可展示基础结果。

### 3.2 阶段排期规划

| 阶段 | 任务 | 状态 |
| --- | --- | --- |
| 阶段 1 | 需求梳理、架构设计、基础 UI 与模块搭建 | 已完成 |
| 阶段 2 | OCR 与后端分析联调、结果展示与历史记录 | 已完成 |
| 阶段 3 | Demo 演示流程优化、异常与边界处理 | 进行中 |
| 阶段 4 | 测试与演示材料整理、最终打包 | 待进行 |

## 4. 后续升级与扩展

为提升系统完整度与实际可用性，后续可在以下方向持续扩展：

1. **识别能力提升**：引入多语种 OCR 与菜品实体库，提高识别准确率与标准化程度。
2. **模型能力扩展**：扩展结构化解析字段（如营养成分、热量、配料来源），并支持多模型切换。
3. **个性化策略增强**：引入更多健康目标（控脂、低盐、低嘌呤等）与动态规则配置。
4. **数据与服务化**：增加用户账户与云端同步，支持多端历史记录与偏好共享。
5. **产品体验优化**：增加结果解释、风险分级可视化与推荐排序，提高可读性与信任度。
6. **工程化与合规**：完善日志、监控与隐私提示，提供可审计的模型输出解释。

## 5. 参考资料

- Android CameraX: https://developer.android.com/jetpack/androidx/releases/camerax
- Google ML Kit: https://developers.google.com/ml-kit/vision/text-recognition
- FastAPI 文档: https://fastapi.tiangolo.com/
- SoruxGPT API 文档: 见 `api_doc.md`

## 6. 附件（可选）

- APK 文件
- 演示视频链接
- 系统架构图
